{
  "id": "2db4a8e9-3a53-4f7d-93cf-5d83fa2cfd56",
  "revision": 0,
  "last_node_id": 39,
  "last_link_id": 39,
  "nodes": [
    {
      "id": 10,
      "type": "PreviewAny",
      "pos": [
        336.5525350446096,
        -106.36464861576488
      ],
      "size": [
        758.2734524651737,
        215.05278452167323
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [
        {
          "name": "source",
          "type": "*",
          "link": 11
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "PreviewAny"
      },
      "widgets_values": [
        null,
        null,
        null
      ]
    },
    {
      "id": 2,
      "type": "AcademicRenderer",
      "pos": [
        376.33848474686647,
        641.743172362479
      ],
      "size": [
        400,
        350
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [
        {
          "name": "color_scheme_text",
          "shape": 7,
          "type": "STRING",
          "link": null
        },
        {
          "name": "ref_image_1",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "ref_image_2",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "ref_image_3",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "ref_image_4",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "ref_image_5",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "ref_image_6",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "ref_image_7",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "ref_image_8",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "visual_schema",
          "type": "STRING",
          "widget": {
            "name": "visual_schema"
          },
          "link": 1
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            2,
            17
          ]
        },
        {
          "name": "info",
          "type": "STRING",
          "slot_index": 1,
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "AcademicRenderer"
      },
      "widgets_values": [
        ""
      ]
    },
    {
      "id": 17,
      "type": "PreviewImage",
      "pos": [
        1426.432266276855,
        1345.7364689662413
      ],
      "size": [
        400,
        350
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 18
        }
      ],
      "outputs": [],
      "title": "渲染结果预览",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 36,
      "type": "TransparentSplitter",
      "pos": [
        1984.0081048940629,
        638.2250068168632
      ],
      "size": [
        366.81552734375,
        194
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 37
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            33,
            36
          ]
        },
        {
          "name": "count",
          "type": "INT",
          "links": null
        },
        {
          "name": "info",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "TransparentSplitter"
      },
      "widgets_values": [
        197,
        171,
        0,
        true,
        "crop"
      ]
    },
    {
      "id": 37,
      "type": "ColorRegionSegmenter",
      "pos": [
        1491.3703669254262,
        634.6096767075376
      ],
      "size": [
        376.3447021484375,
        290
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 38
        }
      ],
      "outputs": [
        {
          "name": "mask",
          "type": "MASK",
          "links": []
        },
        {
          "name": "segmented_image",
          "type": "IMAGE",
          "links": [
            35
          ]
        },
        {
          "name": "masked_image",
          "type": "IMAGE",
          "links": [
            34,
            37
          ]
        },
        {
          "name": "info",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "ColorRegionSegmenter"
      },
      "widgets_values": [
        0.9,
        95.2,
        23,
        true
      ]
    },
    {
      "id": 34,
      "type": "PreviewImage",
      "pos": [
        1922.949543959957,
        1337.196989787892
      ],
      "size": [
        400,
        350
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 35
        }
      ],
      "outputs": [],
      "title": "渲染结果预览",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 33,
      "type": "PreviewImage",
      "pos": [
        2396.3191717930854,
        1342.802302048681
      ],
      "size": [
        400,
        350
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 34
        }
      ],
      "outputs": [],
      "title": "渲染结果预览",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 16,
      "type": "PreviewImage",
      "pos": [
        820.7056163948781,
        1341.57500852163
      ],
      "size": [
        400,
        350
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 17
        }
      ],
      "outputs": [],
      "title": "渲染结果预览",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 35,
      "type": "BatchImageSaver",
      "pos": [
        2545.8027098974085,
        648.6151707819862
      ],
      "size": [
        315.77158203125,
        106
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 36
        }
      ],
      "outputs": [
        {
          "name": "saved_paths",
          "type": "STRING",
          "links": []
        }
      ],
      "properties": {
        "Node name for S&R": "BatchImageSaver"
      },
      "widgets_values": [
        "split",
        "output/splits",
        true
      ]
    },
    {
      "id": 32,
      "type": "PreviewImage",
      "pos": [
        2861.7361076568127,
        1336.9296225114167
      ],
      "size": [
        400,
        350
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 33
        }
      ],
      "outputs": [],
      "title": "渲染结果预览",
      "properties": {
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 3,
      "type": "AcademicEditor",
      "pos": [
        841.6713039958979,
        635.192566403783
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 2
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            18,
            38
          ]
        },
        {
          "name": "info",
          "type": "STRING",
          "slot_index": 1,
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "AcademicEditor"
      },
      "widgets_values": [
        "Make all lines thinner and cleaner",
        false
      ]
    },
    {
      "id": 1,
      "type": "AcademicArchitect",
      "pos": [
        -142.95426149243116,
        307.8692197447956
      ],
      "size": [
        400,
        300
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "visual_schema",
          "type": "STRING",
          "slot_index": 0,
          "links": [
            1,
            11
          ]
        },
        {
          "name": "color_scheme_text",
          "type": "STRING",
          "slot_index": 1,
          "links": null
        },
        {
          "name": "full_prompt",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "AcademicArchitect"
      },
      "widgets_values": [
        "# 问题一：任务的多样性与动态性 - 绘制提示词\n\n## 图片信息\n- **文件名**：chap2_1_task_problem.png\n- **位置**：第2章 问题一\n- **用途**：展示真实世界任务的三大特性（层次性、依赖性、动态性）\n\n---\n\n## 核心概念\n\n现有方法假设任务是\"原子性、预定义、静态\"的，但真实世界的任务具有：\n1. **层次性**：高层意图 → 逐级分解 → 原子任务\n2. **依赖性**：时序、资源、因果、跨智能体协作约束\n3. **动态性**：新增、取消、修改优先级\n\n---\n\n## 整体布局\n\n**三栏并列结构**，分别展示三个特性：\n\n```\n┌─────────────────┬─────────────────┬─────────────────┐\n│    层次性        │     依赖性       │     动态性       │\n│  Hierarchical   │   Dependency    │    Dynamic      │\n├─────────────────┼─────────────────┼─────────────────┤\n│                 │                 │                 │\n│   树状分解图     │   DAG依赖图      │   时间线变化图   │\n│                 │                 │                 │\n└─────────────────┴─────────────────┴─────────────────┘\n```\n\n---\n\n## 三栏详细设计\n\n### 栏1：层次性（Hierarchical）\n\n**树状结构**，从上到下分解：\n\n```\n        [车间巡检]           ← 高层意图（抽象）\n           │\n    ┌──────┼──────┐\n    │      │      │\n [A区巡检] [B区巡检] [汇报]   ← 中层任务\n    │\n ┌──┴──┐\n │     │\n[移动] [拍照]                 ← 原子任务（可执行）\n```\n\n- 用深蓝色 `#2E5A8B` 表示任务节点\n- 顶层节点最大，底层节点最小\n- 虚线框标注\"高层意图\"和\"原子任务\"\n\n### 栏2：依赖性（Dependency）\n\n**DAG图**，展示多种依赖类型：\n\n```\n    [清障]  ──时序──►  [通过]\n       │\n       │因果\n       ▼\n    [检测]  ──资源──►  [搬运]\n                         │\n                         │协作\n                         ▼\n                      [组装]\n```\n\n- 不同类型的边用不同线型：\n  - 时序依赖：实线箭头\n  - 资源依赖：虚线箭头\n  - 因果依赖：点线箭头\n  - 协作约束：双线箭头\n- 用图例说明边的含义\n\n### 栏3：动态性（Dynamic）\n\n**时间线图**，展示任务的动态变化：\n\n```\nt0: [任务A] [任务B] [任务C]\n         │\n         │ 用户指令：\"取消B，新增D\"\n         ▼\nt1: [任务A] [任务D] [任务C]\n         │\n         │ 执行反馈：\"A失败\"\n         ▼\nt2: [任务A'] [任务D] [任务C]  ← 重规划\n```\n\n- 用时间轴从上到下\n- 变化的任务用高亮色 `#DC3545` 标注\n- 标注触发变化的事件（用户指令、执行反馈）\n\n---\n\n## 底部对比\n\n在图的底部添加对比说明：\n\n| 传统假设 | 真实世界 |\n|---------|---------|\n| 原子性 | 层次性 |\n| 预定义 | 依赖性 |\n| 静态 | 动态性 |\n\n---\n\n## 配色规范\n\n参考 `asset/asset.md` 中的颜色规范：\n- 任务节点：深蓝 `#003D7A`\n- 任务图主色：中蓝 `#0057B0`\n- 高亮/变化：红色 `#DC3545`\n- 背景：浅灰 `#F8F9FA`\n- 边框/线条：深灰 `#495057`\n- 文字：黑色 `#212529`\n\n---\n\n## 风格要求\n\n- 学术风格，简洁清晰\n- 三栏等宽，视觉平衡\n- 每栏有小标题和简要说明\n- 分辨率：300dpi\n- 宽高比：16:9 或 3:1（横向长图）\n",
        "Linear Pipeline",
        3,
        "无",
        ""
      ]
    }
  ],
  "links": [
    [
      1,
      1,
      0,
      2,
      9,
      "STRING"
    ],
    [
      2,
      2,
      0,
      3,
      0,
      "IMAGE"
    ],
    [
      11,
      1,
      0,
      10,
      0,
      "STRING"
    ],
    [
      17,
      2,
      0,
      16,
      0,
      "IMAGE"
    ],
    [
      18,
      3,
      0,
      17,
      0,
      "IMAGE"
    ],
    [
      33,
      36,
      0,
      32,
      0,
      "IMAGE"
    ],
    [
      34,
      37,
      2,
      33,
      0,
      "IMAGE"
    ],
    [
      35,
      37,
      1,
      34,
      0,
      "IMAGE"
    ],
    [
      36,
      36,
      0,
      35,
      0,
      "IMAGE"
    ],
    [
      37,
      37,
      2,
      36,
      0,
      "IMAGE"
    ],
    [
      38,
      3,
      0,
      37,
      0,
      "IMAGE"
    ]
  ],
  "groups": [
    {
      "id": 1,
      "title": "学术插图工作流 - Architect → Renderer → Editor (支持多图参考)",
      "bounding": [
        -161.2279955319474,
        207.21372003521967,
        1530.7327062098143,
        854.4771512162763
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 3,
      "title": "学术插图工作流 - 将图片拆解为元件",
      "bounding": [
        1394.071155899922,
        212.67093316534232,
        1644.0803021922225,
        875.5756196420641
      ],
      "color": "#3f789e",
      "font_size": 24,
      "flags": {}
    },
    {
      "id": 2,
      "title": "参考图片 (连接到 ref_image 的输入)",
      "bounding": [
        -147.04834469089107,
        691.271930798132,
        440.00000000000006,
        332
      ],
      "color": "#8AA",
      "font_size": 18,
      "flags": {}
    },
    {
      "id": 4,
      "title": "输出结果",
      "bounding": [
        -159.802696055567,
        1101.8971837542167,
        3788.6270524444294,
        890.7807856316983
      ],
      "color": "#b06634",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 1.1167815779424923,
      "offset": [
        607.3814405381262,
        -96.88553009730782
      ]
    },
    "workflowRendererVersion": "LG",
    "frontendVersion": "1.34.8"
  },
  "version": 0.4
}